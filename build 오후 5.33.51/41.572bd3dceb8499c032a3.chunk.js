(window.webpackJsonp=window.webpackJsonp||[]).push([[41,6,8],{745:function(e,t,a){"use strict";var n=a(676),r=a(677),c=a.n(r),i=a(688);r=a.n(i),i=a(236);a.n(i).a.config(),r.a.initializeApp({apiKey:"AIzaSyCgF4gjyoYzeRKi9avMHtnTjG-1rwHu5Ho",authDomain:"storage-4leaf.firebaseapp.com",databaseURL:"https://storage-4leaf.firebaseio.com",storageBucket:"storage-4leaf.appspot.com"});var l=r.a.storage().ref();t.a={getSotragePath:function(){var e=Object(n.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.child(t);case 2:return a=e.sent,e.next=5,a.getDownloadURL();case 5:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadFile:function(){var e=Object(n.a)(c.a.mark((function e(t,a,n){var r,i,u,o,s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(d=new Date).getFullYear()+"",i=1+d.getMonth()+"",u=d.getDate()+"",o=d.getHours()+"",s=d.getMinutes()+"",d=d.getSeconds()+"",d=r+i+u+o+s+d+a,e.prev=9,e.next=12,l.child("".concat(t,"/").concat(d)).put(n);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log(e.t0);case 17:return e.abrupt("return","".concat(t,"/").concat(d));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a,n){return e.apply(this,arguments)}}(),deleteFile:function(){var e=Object(n.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(a),r=0,e.prev=2,e.next=5,l.child(n).delete();case 5:r=1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}(),fileDownload:function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.child("/DREAM/uploads/storyBoard/202011223597thumb_520390_1598216467_83.jpg").getDownloadURL().then((function(e){var t=new XMLHttpRequest;t.responseType="blob",t.onload=function(e){},t.open("GET",e),t.send()})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},750:function(e,t,a){"use strict";a.r(t);var n=a(675),r=(n=a(1),a.n(n)),c=a(744);t.default=function(e){var t=e.tabs,a=e.currentTab,n=e.setCurrentTab;return r.a.createElement(c.G,{isTab:!0,margin:"0px 0px 40px 0px",dr:"row",al:"center",ju:"flex-start"},t&&t.map((function(e,t){return r.a.createElement(c.A,{isActive:a===t,key:t,onClick:function(){return n(t)}},e)})))}},814:function(e,t,a){"use strict";function n(e){var t=e.currentTab,a=e.setCurrentTab,n=e.isLoading,r=e.fileRef,c=e.currentId,i=e.currentData,l=e.currentTitle,u=e.currentThumbnailPath,x=e.datum,h=e.brandClickHandler,E=e.fileChangeHandler,j=e.basicInfoSaveHandler;e=e.deleteHandler;return Object(m.a)("ADMIN | 브랜드리스트"),o.a.createElement(s.F,{al:"flex-start",ju:"flex-start"},o.a.createElement(f.a,{right:!0},o.a.createElement(d.default,{text:"브랜드 리스트"}),o.a.createElement(p.default,{tabs:g,currentTab:t,setCurrentTab:a})),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.G,{width:"1000px",margin:"0px 10px 0px 0px"},o.a.createElement(f.a,{left:!0},o.a.createElement(s.C,null,o.a.createElement(s.B,{width:"30%"},"번호"),o.a.createElement(s.B,{width:"70%"},"브랜드명")),o.a.createElement(s.G,{height:"600px",isBorder:!0,isScroll:!0,al:"flex-start",ju:"flex-start"},x?0===x.length?o.a.createElement(s.C,{isData:!0},o.a.createElement(s.B,{isData:!0,width:"100%"},"조회 된 데이터가 없습니다.")):x.map((function(e,t){return o.a.createElement(f.a,{left:!0,delay:30*t,key:e._id},o.a.createElement(s.C,{isActive:c===e._id,isData:!0,onClick:function(){return h(e)}},o.a.createElement(s.B,{isData:!0,width:"30%"},t+1),o.a.createElement(s.B,{isData:!0,width:"70%"},20<e.title.length?e.title.substring(0,18)+"...":e.title)))})):o.a.createElement(b.default,null)))),o.a.createElement(f.a,{right:!0},o.a.createElement(s.G,null,o.a.createElement(s.C,null,o.a.createElement(s.B,{width:"100%"},"브랜드 정보")),o.a.createElement(s.G,{height:"600px",isBorder:!0,isScroll:!0,padding:"10px",al:"flex-start",ju:"flex-start"},i?o.a.createElement(s.G,{padding:"15px"},o.a.createElement(s.G,{dr:"row",margin:"0px 0px 20px 0px"},o.a.createElement(s.e,null,"제목"),o.a.createElement(s.D,Object.assign({type:"text"},l))),o.a.createElement(s.p,{margin:"0px 0px 20px 0px",src:u&&u.value,width:"300px",height:"300px",isBorder:!0}),o.a.createElement(s.j,{id:"file-js",type:"file",accept:"image/jpeg,image/gif,image/png",onChange:E,ref:r}),n?o.a.createElement(b.default,null):o.a.createElement(s.k,{width:"300px",htmlFor:"file-js",margin:"0px 0px 55px 0px"},"THUMBNAIL UPLOAD"),o.a.createElement(s.G,{dr:"row",al:"flex-end",ju:"flex-end"},o.a.createElement(s.d,{margin:"0px 10px 0px 0px",kindOf:"delete",onClick:e},"브랜드 삭제"),o.a.createElement("a",{href:"/#/brand-detail/".concat(i&&i._id),target:"_blank"},o.a.createElement(s.d,{margin:"0px 10px 0px 0px"},"게시글 보러가기")),o.a.createElement(s.d,{kindOf:"create",onClick:j},"정보저장"))):o.a.createElement(s.G,{padding:"20px"},"좌측 브랜드를 선택해주세요."))))))}a.r(t);var r=a(676),c=a(678),i=a(677),l=a.n(i),u=(a(682),a(1)),o=a.n(u),s=(a(681),a(675),a(744)),d=a(762),p=a(750),f=(i=a(679),a.n(i)),b=a(746),m=a(680),g=(a(673),["브랜드 리스트"]),x=a(105),h=a(104);function E(){var e=Object(h.a)(["\n  mutation deleteBrand($id: String!) {\n    deleteBrand(id: $id)\n  }\n"]);return E=function(){return e},e}function j(){var e=Object(h.a)(["\n  mutation modifyBrandBasic(\n    $id: String!\n    $title: String!\n    $thumbnail: String!\n  ) {\n    modifyBrandBasic(id: $id, title: $title, thumbnail: $thumbnail)\n  }\n"]);return j=function(){return e},e}function v(){var e=Object(h.a)(["\n  query getBrandList {\n    getBrandList {\n      _id\n      title\n      thumbnail\n      isDelete\n    }\n  }\n"]);return v=function(){return e},e}var O=Object(x.gql)(v()),w=Object(x.gql)(j()),T=Object(x.gql)(E()),k=a(179),B=a(745),y=a(749),C=a(685);a(686),t.default=function(){var e=Object(u.useState)(0),t=(g=Object(c.a)(e,2))[0],a=g[1],i=Object(u.useState)(!1),s=(H=Object(c.a)(i,2))[0],d=H[1],p=Object(u.useRef)(),f=(e=Object(u.useState)(""),(g=Object(c.a)(e,2))[0]),b=g[1],m=(i=Object(u.useState)(null),e=(H=Object(c.a)(i,2))[0],H[1]),g=Object(u.useState)(!1),h=(i=Object(c.a)(g,2))[0],E=i[1],j=Object(y.a)(),v=Object(y.a)(),D=(g=(H=Object(x.useQuery)(O)).data,H.refetch),S=(i=Object(x.useMutation)(w),Object(c.a)(i,1)[0]),H=Object(x.useMutation)(T),L=Object(c.a)(H,1)[0],G=(i=function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,B.a.uploadFile("SJPET/uploads/brand",t.target.files[0].name,t.target.files[0]);case 3:return a=e.sent,e.next=6,B.a.getSotragePath(a);case 6:j.setValue(e.sent),d(!1),p.current.value=null;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({variables:{id:f,thumbnail:j.value,title:v.value}});case 2:e.sent.data.modifyBrandBasic?(k.b.info("UPDATE CONTENT!"),D()):k.b.error("잠시 후 다시 시도해주세요.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({variables:{id:f}});case 2:e.sent.data.deleteBrand?(k.b.info("DELETE CONTENT!"),D(),m(null)):k.b.error("잠시 후 다시 시도해주세요.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(u.useEffect)((function(){D()}),[]),o.a.createElement(n,{currentTab:t,setCurrentTab:a,isLoading:s,fileRef:p,currentId:f,currentData:e,currentThumbnailPath:j,currentTitle:v,openDialog:h,datum:g&&g.getBrandList,brandClickHandler:function(e){b(e._id),m(e),v.setValue(e.title),j.setValue(e.thumbnail)},fileChangeHandler:i,dialogToggle:function(){E(!h)},basicInfoSaveHandler:H,deleteHandler:function(){Object(C.confirmAlert)({title:"DELETE EVENT",message:"선택하신 브랜드를 삭제 하시겠습니까 ?",buttons:[{label:"취소",onClick:function(){return!1}},{label:"확인",onClick:function(){return G()}}]})}})}}}]);