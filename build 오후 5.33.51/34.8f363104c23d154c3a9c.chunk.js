(window.webpackJsonp=window.webpackJsonp||[]).push([[34,6],{745:function(e,t,a){"use strict";var n=a(676),r=a(677),c=a.n(r),u=a(688);r=a.n(u),u=a(236);a.n(u).a.config(),r.a.initializeApp({apiKey:"AIzaSyCgF4gjyoYzeRKi9avMHtnTjG-1rwHu5Ho",authDomain:"storage-4leaf.firebaseapp.com",databaseURL:"https://storage-4leaf.firebaseio.com",storageBucket:"storage-4leaf.appspot.com"});var l=r.a.storage().ref();t.a={getSotragePath:function(){var e=Object(n.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.child(t);case 2:return a=e.sent,e.next=5,a.getDownloadURL();case 5:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadFile:function(){var e=Object(n.a)(c.a.mark((function e(t,a,n){var r,u,i,o,s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(d=new Date).getFullYear()+"",u=1+d.getMonth()+"",i=d.getDate()+"",o=d.getHours()+"",s=d.getMinutes()+"",d=d.getSeconds()+"",d=r+u+i+o+s+d+a,e.prev=9,e.next=12,l.child("".concat(t,"/").concat(d)).put(n);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log(e.t0);case 17:return e.abrupt("return","".concat(t,"/").concat(d));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a,n){return e.apply(this,arguments)}}(),deleteFile:function(){var e=Object(n.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(a),r=0,e.prev=2,e.next=5,l.child(n).delete();case 5:r=1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}(),fileDownload:function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.child("/DREAM/uploads/storyBoard/202011223597thumb_520390_1598216467_83.jpg").getDownloadURL().then((function(e){var t=new XMLHttpRequest;t.responseType="blob",t.onload=function(e){},t.open("GET",e),t.send()})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},757:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));t=a(689),t=a(694),t=a(697);var n=function(e){return!(!e||!e.trim())}},758:function(e,t,a){"use strict";var n=a(685);a(686),t.a=function(e,t,a){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";Object(n.confirmAlert)({title:e,message:t,buttons:[{label:"취소",onClick:function(){return!1}},{label:"확인",onClick:function(){return a(r)}}]})}},809:function(e,t,a){"use strict";function n(e){var t=e.isLoading,a=e.fileRef,n=e.dataTitle,r=e.dataAddress,c=e.dataLnt,u=e.dataAtt,l=e.dataThumbnailPath,i=e.dataTel,g=e.dataWorkTime,m=e.fileChangeHandler,h=e.updateRoadShowHandler,O=e.moveListPageHandler,x=e.deleteRoadShowHandler;return Object(b.a)("ADMIN | 가맹점 관리"),o.a.createElement(s.F,{al:"flex-start",ju:"flex-start"},o.a.createElement(p.a,null,o.a.createElement(d.default,{text:"가맹정 상세정보"}),o.a.createElement(s.G,{margin:"0px 0px 20px 0px"},o.a.createElement(s.i,{margin:"0px 0px 5px 0px"},"가맹점 기본정보"),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.g,{height:"300px"},"썸네일"),o.a.createElement(s.h,{height:"300px"},o.a.createElement(s.p,{src:l.value,width:"280px",height:"210px",margin:"0px 0px 5px 0px"}),o.a.createElement(s.j,{id:"file-js",type:"file",accept:"image/jpeg,image/gif,image/png",onChange:m,ref:a}),t?o.a.createElement(f.default,null):o.a.createElement(s.k,{width:"280px",htmlFor:"file-js",margin:"0px 0px 15px 0px"},"THUMBNAIL UPLOAD"),o.a.createElement(s.q,{width:"100%",size:"13px"},"이미지 사이즈는 16:9 비율을 기준으로 합니다. 업로드 시 주의해주세요."))),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.g,null,"가맹점명"),o.a.createElement(s.h,null,o.a.createElement(s.D,Object.assign({height:"25px"},n)))),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.g,null,"가맹점 주소"),o.a.createElement(s.h,null,o.a.createElement(s.D,Object.assign({height:"25px"},r)))),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.g,null,"위도 값"),o.a.createElement(s.h,null,o.a.createElement(s.D,Object.assign({height:"25px"},u)))),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.g,null,"경도 값"),o.a.createElement(s.h,null,o.a.createElement(s.D,Object.assign({height:"25px"},c)))),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.g,null,"연락처"),o.a.createElement(s.h,null,o.a.createElement(s.D,Object.assign({height:"25px"},i)))),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.g,null,"영업시간"),o.a.createElement(s.h,null,o.a.createElement(s.D,Object.assign({height:"25px"},g))))),o.a.createElement(s.G,{margin:"10px 0px",al:"flex-end",ju:"flex-end",dr:"row"},o.a.createElement(s.d,{kindOf:"update",margin:"0px 5px",onClick:function(){return O()}},"목록으로"),o.a.createElement(s.d,{kindOf:"delete",margin:"0px 5px",onClick:function(){return x()}},"삭제하기"),o.a.createElement(s.d,{kindOf:"create",margin:"0px 5px",onClick:function(){return h()}},"저장하기"))))}a.r(t);var r=a(676),c=a(678),u=a(677),l=a.n(u),i=(a(700),a(682),a(1)),o=a.n(i),s=(a(681),a(744)),d=a(762),p=(u=a(679),a.n(u)),f=a(746),b=a(680),g=(a(673),a(105)),m=a(104);function h(){var e=Object(m.a)(["\n  mutation deleteStoreOne($id: String!) {\n    deleteStoreOne(id: $id)\n  }\n"]);return h=function(){return e},e}function O(){var e=Object(m.a)(["\n  mutation updateStoreOne(\n    $id: String!\n    $title: String!\n    $address: String!\n    $lnt: String!\n    $att: String!\n    $thumbnailPath: String!\n    $tel: String!\n    $workTime: String!\n  ) {\n    updateStoreOne(\n      id: $id\n      title: $title\n      address: $address\n      lnt: $lnt\n      att: $att\n      thumbnailPath: $thumbnailPath\n      tel: $tel\n      workTime: $workTime\n    )\n  }\n"]);return O=function(){return e},e}function x(){var e=Object(m.a)(["\n  query getStoreOne($id: String!) {\n    getStoreOne(id: $id) {\n      _id\n      title\n      address\n      lnt\n      att\n      thumbnailPath\n      tel\n      workTime\n    }\n  }\n"]);return x=function(){return e},e}var j=Object(g.gql)(x()),v=Object(g.gql)(O()),E=Object(g.gql)(h()),w=a(179),S=a(745),k=a(749),T=a(757),$=a(758);t.default=function(e){var t=e.history,a=e.match,u=Object(i.useState)(0),s=(L=Object(c.a)(u,2))[0],d=L[1],p=Object(i.useState)(!1),f=(u=(e=Object(c.a)(p,2))[0],e[1]),b=Object(i.useRef)(),m=Object(k.a)(""),h=Object(k.a)(""),O=Object(k.a)(""),x=Object(k.a)(""),D=Object(k.a)(""),y=Object(k.a)(""),P=Object(k.a)(""),H=Object(k.a)(""),L=Object(i.useState)(!0),R=(e=(p=Object(c.a)(L,2))[0],L=p[1],p=a.params.id,p=(a=Object(g.useQuery)(j,{variables:{id:p}})).data,a.refetch);a.loading||e&&(m.setValue(p.getStoreOne._id),h.setValue(p.getStoreOne.title),O.setValue(p.getStoreOne.address),x.setValue(p.getStoreOne.lnt),D.setValue(p.getStoreOne.att),y.setValue(p.getStoreOne.thumbnailPath),P.setValue(p.getStoreOne.tel),H.setValue(p.getStoreOne.workTime),L(!1));L=Object(g.useMutation)(v);var A=Object(c.a)(L,1)[0],M=(L=Object(g.useMutation)(E),Object(c.a)(L,1)[0]),G=(L=function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,S.a.uploadFile("SJPET/uploads/store",t.target.files[0].name,t.target.files[0]);case 3:return a=e.sent,e.next=6,S.a.getSotragePath(a);case 6:y.setValue(e.sent),b.current.value=null,f(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(T.a)(h.value)){e.next=3;break}return w.b.error("가맹점명은 필수 입력사항 입니다."),e.abrupt("return");case 3:if(Object(T.a)(O.value)){e.next=6;break}return w.b.error("가맹점주소는 필수 입력사항 입니다."),e.abrupt("return");case 6:if(Object(T.a)(D.value)){e.next=9;break}return w.b.error("위도는 필수 입력사항 입니다."),e.abrupt("return");case 9:if(Object(T.a)(x.value)){e.next=12;break}return w.b.error("경도는 필수 입력사항 입니다."),e.abrupt("return");case 12:if(Object(T.a)(P.value)){e.next=15;break}return w.b.error("연락처는 필수 입력사항 입니다."),e.abrupt("return");case 15:if(Object(T.a)(H.value)){e.next=18;break}return w.b.error("영업시간은 필수 입력사항 입니다."),e.abrupt("return");case 18:return e.next=20,A({variables:{id:m.value,title:h.value,address:O.value,att:D.value,lnt:x.value,thumbnailPath:y.value,tel:P.value,workTime:H.value}});case 20:e.sent.data.updateStoreOne?(w.b.info("정보가 수정되었습니다."),t.push("/admin/storeManagement")):w.b.error("잠시 후 다시 시도 해주세요.");case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),C=function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({variables:{id:m.value}});case 2:e.sent.data.deleteStoreOne?(w.b.info("가맹점이 삭제되었습니다."),t.push("/admin/storeManagement")):w.b.error("잠시 후 다시 시도해주세요.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){R()}),[]),Object(i.useEffect)((function(){}),[s]),o.a.createElement(n,{currentTab:s,setCurrentTab:d,isLoading:u,fileRef:b,dataTitle:h,dataAddress:O,dataLnt:x,dataAtt:D,dataThumbnailPath:y,dataTel:P,dataWorkTime:H,fileChangeHandler:L,updateRoadShowHandler:function(){Object($.a)("UPDATE","변경된 내용을 저장하시겠습니까?",G,null)},moveListPageHandler:function(){t.push("/admin/storeManagement")},deleteRoadShowHandler:function(){Object($.a)("DELETE","해당 가맹점 정보를 삭제하시겠습니까?",C,null)}})}}}]);