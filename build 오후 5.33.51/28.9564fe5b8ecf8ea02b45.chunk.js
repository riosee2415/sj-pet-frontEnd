(window.webpackJsonp=window.webpackJsonp||[]).push([[28,8],{750:function(e,t,n){"use strict";n.r(t);var r=n(675),a=(r=n(1),n.n(r)),i=n(744);t.default=function(e){var t=e.tabs,n=e.currentTab,r=e.setCurrentTab;return a.a.createElement(i.G,{isTab:!0,margin:"0px 0px 40px 0px",dr:"row",al:"center",ju:"flex-start"},t&&t.map((function(e,t){return a.a.createElement(i.A,{isActive:n===t,key:t,onClick:function(){return r(t)}},e)})))}},757:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));t=n(689),t=n(694),t=n(697);var r=function(e){return!(!e||!e.trim())}},758:function(e,t,n){"use strict";var r=n(685);n(686),t.a=function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";Object(r.confirmAlert)({title:e,message:t,buttons:[{label:"취소",onClick:function(){return!1}},{label:"확인",onClick:function(){return n(a)}}]})}},766:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return h}));var r=n(104);n=n(105);function a(){var e=Object(r.a)(["\n  mutation modifyDefaultUserRight($id: String!, $rightId: String!) {\n    modifyDefaultUserRight(id: $id, rightId: $rightId)\n  }\n"]);return a=function(){return e},e}function i(){var e=Object(r.a)(["\n  query getDefaultUserRight {\n    getDefaultUserRight {\n      _id\n      rightKey {\n        rightName\n      }\n    }\n  }\n"]);return i=function(){return e},e}function c(){var e=Object(r.a)(["\n  mutation createUserRight(\n    $rightName: String!\n    $isAdminLogin: Boolean!\n    $sort: Int!\n  ) {\n    createUserRight(\n      rightName: $rightName\n      isAdminLogin: $isAdminLogin\n      sort: $sort\n    )\n  }\n"]);return c=function(){return e},e}function u(){var e=Object(r.a)(["\n  mutation deleteUserRight($id: String!) {\n    deleteUserRight(id: $id)\n  }\n"]);return u=function(){return e},e}function l(){var e=Object(r.a)(["\n  mutation rightSortChange($id: String!, $sort: Int!) {\n    rightSortChange(id: $id, sort: $sort)\n  }\n"]);return l=function(){return e},e}function o(){var e=Object(r.a)(["\n  mutation modifyRight(\n    $id: String!\n    $rightName: String!\n    $isAdminLogin: Boolean!\n  ) {\n    modifyRight(id: $id, rightName: $rightName, isAdminLogin: $isAdminLogin)\n  }\n"]);return o=function(){return e},e}function s(){var e=Object(r.a)(["\n  query getUserRight {\n    getUserRight {\n      _id\n      rightName\n      isAdminLogin\n      sort\n    }\n  }\n"]);return s=function(){return e},e}var d=Object(n.gql)(s()),g=Object(n.gql)(o()),m=Object(n.gql)(l()),f=Object(n.gql)(u()),p=Object(n.gql)(c()),b=Object(n.gql)(i()),h=Object(n.gql)(a())},821:function(e,t,n){"use strict";function r(e){var t=e.currentTab,n=e.setCurrentTab,r=e.currentRightName,a=e.currentisAdminLogin,i=e.openDialog,c=e.selectDefaultId,u=e.rDatum,l=e.dData,v=e.currentId,D=e.clickRightHandler,y=e.adminToggleHandler,C=e.updateRightHandler,$=e.rightSortChange,U=e.userRightDelete,A=e.dialogToggle,S=e.createUserRight;e=e.modifyDefaultUserRight;return Object(b.a)("ADMIN | 권한 관리"),o.a.createElement(d.F,{al:"flex-start",ju:"flex-start"},o.a.createElement(f.a,{right:!0},o.a.createElement(g.default,{text:"권한 관리"}),o.a.createElement(m.default,{tabs:k,currentTab:t,setCurrentTab:n})),o.a.createElement(d.G,{dr:"row"},o.a.createElement(d.G,{margin:"0px 5px 0px 0px"},o.a.createElement(d.C,null,o.a.createElement(d.B,{width:"10%"},"번호"),o.a.createElement(d.B,{width:"50%"},"권한명"),o.a.createElement(d.B,{width:"20%"},"정렬"),o.a.createElement(d.B,{width:"20%"},"관리자 접속여부")),o.a.createElement(d.G,{height:"400px",isBorder:!0,isScroll:!0,al:"flex-start",ju:"flex-start"},u?0===u.length?o.a.createElement(d.C,{isData:!0},o.a.createElement(d.B,{isData:!0,width:"100%"},"조회 된 데이터가 없습니다.")):u.map((function(e,t){return o.a.createElement(f.a,{key:e._id,delay:50*t},o.a.createElement(d.C,{isData:!0,isActive:v===e._id,onClick:function(){return D(e)}},o.a.createElement(d.B,{isData:!0,width:"10%"},t+1),o.a.createElement(d.B,{isData:!0,width:"50%"},e.rightName),o.a.createElement(d.B,{isData:!0,width:"20%",isSvg:!0},o.a.createElement(w.b,{onClick:function(){return $(0,e.sort,e._id)}}),e.sort,o.a.createElement(w.c,{onClick:function(){return $(1,e.sort,e._id)}})),o.a.createElement(d.B,{isData:!0,width:"20%"},o.a.createElement(d.x,{status:!e.isAdminLogin},e.isAdminLogin?"가능":"불가"))))})):o.a.createElement(p.default,null))),o.a.createElement(d.G,{margin:"0px 5px 0px 0px"},o.a.createElement(d.C,null,o.a.createElement(d.B,{width:"100%"},"권한 정보")),o.a.createElement(d.G,{height:"400px",isBorder:!0},""!==v?o.a.createElement(o.a.Fragment,null,o.a.createElement(d.G,{dr:"row",margin:"20px"},o.a.createElement(d.e,null,"권한명"),o.a.createElement(d.D,Object.assign({width:"300px"},r))),o.a.createElement(d.G,{dr:"row",margin:"20px"},o.a.createElement(d.e,null),o.a.createElement(d.w,(n={status:!0,width:"300px"},Object(s.a)(n,"status",a.value),Object(s.a)(n,"onClick",y),n),"관리자 로그인")),o.a.createElement(d.G,{margin:"40px 0px 0px 0px",dr:"row",ju:"space-around"},o.a.createElement(d.d,{width:"120px",height:"25px",kindOf:"delete",onClick:function(){return U(v)}},"권한 삭제"),o.a.createElement(d.d,{width:"120px",height:"25px",kindOf:"update",onClick:C},"정보 수정"))):o.a.createElement(d.G,null,"좌측 권한을 선택해주세요.")))),o.a.createElement(d.G,{dr:"row",al:"flex-end",ju:"flex-end",margin:"10px",padding:"10px 20px"},o.a.createElement(d.d,{onClick:A,kindOf:"create",width:"100px",height:"25px"},"권한 추가")),o.a.createElement(d.G,{margin:"20px 0px"},o.a.createElement(d.n,{padding:"5px"},o.a.createElement(d.o,{margin:"5px 0px 5px 0px"},"일반 사용자의 회원가입 시 기본적으로 설정되는 권한 입니다."),o.a.createElement(d.o,{margin:"5px 0px 5px 0px"},"설정된 권한을 절대 삭제하지 마세요.")),o.a.createElement(d.G,{dr:"row",margin:"20px 0px",al:"flex-start",ju:"flex-start"},o.a.createElement(d.e,null,"현재 초기 설정 값"),o.a.createElement(d.D,{type:"text",readOnly:!0,width:"300px",value:l&&l.rightKey.rightName||""})),o.a.createElement(d.G,{dr:"row",margin:"10px 0px",al:"flex-start",ju:"flex-start"},o.a.createElement(d.e,null,"변경할 초기 값"),o.a.createElement(d.b,Object.assign({width:"300px",margin:"0px 10px 0px 0px"},c),o.a.createElement(d.c,{value:""},"--선택--"),u&&u.map((function(e,t){if("개발사"!==e.rightName)return o.a.createElement(d.c,{key:t,value:e._id},e.rightName)}))),o.a.createElement(d.d,{kindOf:"update",width:"100px",onClick:e},"적용"))),o.a.createElement(x.a,{open:i,TransitionComponent:R,keepMounted:!0,onClose:function(){return A()},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",fullWidth:!0},o.a.createElement(O.a,{id:"alert-dialog-slide-title"},"권한 추가하기"),o.a.createElement(j.a,null,o.a.createElement(d.G,{padding:"30px 0px"},o.a.createElement(d.G,{dr:"row",margin:"15px 0px"},o.a.createElement(d.e,null,"권한명"),o.a.createElement(d.D,Object.assign({type:"text",width:"300px"},r))),o.a.createElement(d.G,{dr:"row",margin:"15px 0px"},o.a.createElement(d.e,null),o.a.createElement(d.w,(r={status:!0,width:"300px"},Object(s.a)(r,"status",a.value),Object(s.a)(r,"onClick",y),r),"관리자 로그인")))),o.a.createElement(E.a,null,o.a.createElement(h.a,{onClick:function(){return S()},color:"primary"},"저장 후 닫기"),o.a.createElement(h.a,{onClick:function(){return A()},color:"secondary"},"닫기"))))}n.r(t);var a=n(676),i=n(678),c=n(677),u=n.n(c),l=n(1),o=n.n(l),s=n(237),d=(n(681),n(675),n(744)),g=n(762),m=n(750),f=(c=n(679),n.n(c)),p=n(746),b=n(680),h=n(739),x=n(736),E=n(738),j=n(737),O=n(743),v=n(673),w=n(687),k=["권한 관리"],R=o.a.forwardRef((function(e,t){return o.a.createElement(v.a,Object.assign({direction:"up",ref:t},e))})),D=n(105),y=n(766),C=n(179),$=n(749),U=n(758),A=n(757);t.default=function(){function e(){m(!g)}var t=Object(l.useState)(0),n=(G=Object(i.a)(t,2))[0],c=G[1],s=Object(l.useState)(!1),d=(k=Object(i.a)(s,2))[0],g=(t=Object(l.useState)(!1),(G=Object(i.a)(t,2))[0]),m=G[1],f=(s=Object(l.useState)(""),(k=Object(i.a)(s,2))[0]),p=k[1],b=Object($.a)(""),h=Object($.a)(!1),x=Object($.a)(""),E=(t=Object(D.useQuery)(y.d)).data,j=t.refetch,O=(G=Object(D.useQuery)(y.c)).data,v=G.refetch,w=(s=Object(D.useMutation)(y.f),Object(i.a)(s,1)[0]),k=Object(D.useMutation)(y.b),R=Object(i.a)(k,1)[0],S=(t=Object(D.useMutation)(y.g),Object(i.a)(t,1)[0]),G=Object(D.useMutation)(y.a),N=Object(i.a)(G,1)[0],L=(s=Object(D.useMutation)(y.e),Object(i.a)(s,1)[0]),T=(k=function(){var e=Object(a.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("개발사"===b.value)return C.b.error("현재 권한으로 접근할 수 없습니다."),e.abrupt("return");e.next=3;break;case 3:return e.next=5,w({variables:{id:f,rightName:b.value,isAdminLogin:!!h.value}});case 5:e.sent.data.modifyRight?(C.b.info("정보가 수정되었습니다."),j(),v()):C.b.error("잠시 후 다시 시도해주세요.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(a.a)(u.a.mark((function e(t,n,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(99===n)return C.b.error("현재 권한으로 접근할 수 없습니다."),e.abrupt("return");e.next=3;break;case 3:if(0===t)return e.next=6,S({variables:{id:r,sort:parseInt(n+1)}});e.next=11;break;case 6:e.sent.data.rightSortChange?(j(),v()):C.b.error("잠시 후 다시 시도해주세요."),e.next=19;break;case 11:if(1===n)return C.b.error("우선순위를 더 이상 올릴 수 없습니다."),e.abrupt("return");e.next=14;break;case 14:return e.next=16,S({variables:{id:r,sort:parseInt(n-1)}});case 16:e.sent.data.rightSortChange?(j(),v()):C.b.error("잠시 후 다시 시도해주세요.");case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),function(){var e=Object(a.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("개발사"===b.value)return C.b.error("현재 권한으로 접근할 수 없습니다."),e.abrupt("return");e.next=3;break;case 3:return e.next=5,R({variables:{id:t}});case 5:e.sent.data.deleteUserRight?(C.b.info("권한이 삭제되었습니다."),j(),v()):C.b.error("잠시 후 다시 시도해주세요.");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());G=function(){var t=Object(a.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(A.a)(b.value)){t.next=3;break}return C.b.error("권한명은 필수 입니다."),t.abrupt("return");case 3:return t.next=5,N({variables:{rightName:b.value,isAdminLogin:!!h.value,sort:parseInt(E&&E.getUserRight.length+1)}});case 5:t.sent.data.createUserRight?(C.b.info("권한이 추가 되었습니다."),j(),v(),e()):C.b.error("잠시 후 다시 시도해주세요.");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var e=Object(a.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(A.a)(x.value)){e.next=3;break}return C.b.error("권한 선택은 필수 입니다."),e.abrupt("return");case 3:return e.next=5,L({variables:{id:O&&O.getDefaultUserRight[0]._id,rightId:x.value}});case 5:e.sent.data.modifyDefaultUserRight?(C.b.info("기본값 설정이 변경되었습니다."),j(),v(),x.setValue("")):C.b.error("잠시 후 다시 시도해주세요.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){h.setValue(!1),b.setValue(""),p("")}),[g]),o.a.createElement(r,{currentTab:n,setCurrentTab:c,isLoading:d,currentId:f,currentRightName:b,currentisAdminLogin:h,openDialog:g,selectDefaultId:x,rDatum:E&&E.getUserRight,dData:O&&O.getDefaultUserRight[0],clickRightHandler:function(e){p(e._id),b.setValue(e.rightName),h.setValue(e.isAdminLogin)},adminToggleHandler:function(){h.setValue(!h.value)},updateRightHandler:k,rightSortChange:t,userRightDelete:function(e){Object(U.a)("DELETE RIGHT","선택하신 권한을 삭제하시겠습니까?",T,e)},dialogToggle:e,createUserRight:G,modifyDefaultUserRight:s})}}}]);