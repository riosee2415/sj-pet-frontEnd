(window.webpackJsonp=window.webpackJsonp||[]).push([[52,8],{750:function(e,t,r){"use strict";r.r(t);var n=r(675),a=(n=r(1),r.n(n)),c=r(744);t.default=function(e){var t=e.tabs,r=e.currentTab,n=e.setCurrentTab;return a.a.createElement(c.G,{isTab:!0,margin:"0px 0px 40px 0px",dr:"row",al:"center",ju:"flex-start"},t&&t.map((function(e,t){return a.a.createElement(c.A,{isActive:r===t,key:t,onClick:function(){return n(t)}},e)})))}},810:function(e,t,r){"use strict";r.r(t);var n=r(676),a=r(678),c=r(677),i=r.n(c),l=(r(682),r(1)),u=r.n(l),o=r(104),p=(r(681),r(744)),s=r(762),x=r(750),m=(c=r(679),r.n(c)),f=(c=r(53),r(746)),b=r(680);function d(){var e=Object(o.a)(["\n  background-image: url(",");\n  background-size: cover;\n  background-position: center center;\n"]);return d=function(){return e},e}function g(e){var t=e.currentTab,r=e.setCurrentTab,n=e.isLoading,a=e.fileRef,c=e.currentThumbnail,i=e.currentTitle,l=e.currentContent,o=e.fileChangeHandler;e=e.createStoryViewHandler;return Object(b.a)("ADMIN | 스토리 등록"),u.a.createElement(p.F,{al:"flex-start",ju:"flex-start"},u.a.createElement(m.a,{right:!0},u.a.createElement(s.default,{text:"스토리 등록"}),u.a.createElement(x.default,{tabs:E,currentTab:t,setCurrentTab:r})),u.a.createElement(p.G,{dr:"row",al:"flex-start",ju:"flex-start"},u.a.createElement(p.G,{width:"400px",minWidth:"400px",margin:"0px 10px 0px 0px"},u.a.createElement(p.C,null,u.a.createElement(p.B,{width:"100%"},"스토리 이미지 정보")),u.a.createElement(p.G,{height:"630px",isBorder:!0,padding:"15px",ju:"flex-start"},u.a.createElement(p.n,{margin:"0px 0px 40px 0px"},u.a.createElement(p.o,{padding:"5px"},"이미지 사이즈는 1 : 1 비율로 업로드해주세요."),u.a.createElement(p.o,{padding:"5px"},"비율이 상이할 경우 화면에 비정상적으로 보일 수 있습니다.")),u.a.createElement(p.e,{margin:"0px 0px 20px 0px"},"썸네일 이미지"),u.a.createElement(p.p,{src:c,width:"350px",height:"350px",isBorder:!0,margin:"0px 0px 5px 0px"}),u.a.createElement(p.j,{id:"file-js",type:"file",accept:"image/jpeg,image/gif,image/png",onChange:o,ref:a}),n?u.a.createElement(f.default,null):u.a.createElement(p.k,{width:"350px",htmlFor:"file-js",margin:"0px 0px 55px 0px"},"THUMBNAIL UPLOAD"))),u.a.createElement(p.G,null,u.a.createElement(p.C,null,u.a.createElement(p.B,{width:"100%"},"스토리 정보")),u.a.createElement(p.G,{height:"630px",isBorder:!0,padding:"10px",al:"flex-start",ju:"flex-start",isScroll:!0},u.a.createElement(p.G,{dr:"row",margin:"30px 0px 0px 0px"},u.a.createElement(p.r,null,"제목"),u.a.createElement(p.D,Object.assign({},i,{type:"text"}))),u.a.createElement(p.G,{dr:"row",margin:"5px 0px"},u.a.createElement(p.G,{dr:"row",al:"flex-start"},u.a.createElement(p.r,null,"스토리 내용"),u.a.createElement(p.E,Object.assign({height:"500px"},l))))))),u.a.createElement(p.G,{al:"flex-end",ju:"flex-end",margin:"20px 0px"},u.a.createElement(p.d,{kindOf:"create",onClick:e},"스토리 등록")))}var E=["스토리 관리"],h=(Object(c.d)(p.G)(d(),(function(e){return e.src})),r(105));function j(){var e=Object(o.a)(["\n  mutation createStoryView(\n    $thumbnail: String!\n    $title: String!\n    $content: String!\n  ) {\n    createStoryView(thumbnail: $thumbnail, title: $title, content: $content)\n  }\n"]);return j=function(){return e},e}function w(){var e=Object(o.a)(["\n  query getStoryView {\n    getStoryView {\n      _id\n      title\n      content\n      thumbnail\n      isDelete\n    }\n  }\n"]);return w=function(){return e},e}Object(h.gql)(w());var O=Object(h.gql)(j()),v=r(179),S=r(745),T=r(749);t.default=function(){var e=Object(l.useState)(0),t=(o=Object(a.a)(e,2))[0],r=o[1],c=Object(l.useState)(!1),o=(e=Object(a.a)(c,2))[0],p=e[1],s=Object(l.useRef)(),x=(c=Object(l.useState)(""),(e=Object(a.a)(c,2))[0]),m=e[1],f=Object(T.a)(""),b=Object(T.a)(""),d=(c=Object(h.useMutation)(O),Object(a.a)(c,1)[0]);e=function(){var e=Object(n.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,S.a.uploadFile("SJPET/uploads/storyView",t.target.files[0].name,t.target.files[0]);case 3:return r=e.sent,e.next=6,S.a.getSotragePath(r);case 6:m(e.sent),p(!1),s.current.value=null;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(n.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&x.trim()){e.next=3;break}return v.b.error("썸네일 이미지는 필수 입니다."),e.abrupt("return");case 3:if(f.value&&f.value.trim()){e.next=6;break}return v.b.error("제목은 필수 입니다."),e.abrupt("return");case 6:if(b&&b.value.trim()){e.next=9;break}return v.b.error("스토리 내용은 필수 입니다."),e.abrupt("return");case 9:return e.next=11,d({variables:{thumbnail:x,title:f.value,content:b.value}});case 11:e.sent.data.createStoryView?(v.b.info("CREATE STORYVIEW!"),m(""),f.setValue(""),b.setValue("")):v.b.error("잠시 후 다시 시도해주세요.");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(g,{currentTab:t,setCurrentTab:r,isLoading:o,fileRef:s,currentThumbnail:x,currentTitle:f,currentContent:b,fileChangeHandler:e,createStoryViewHandler:c})}}}]);