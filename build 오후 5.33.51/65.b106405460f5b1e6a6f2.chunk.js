(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{807:function(e,t,a){"use strict";function n(e){var t=e.currentTab,a=e.setCurrentTab,n=e.descRef,r=e.canEditor,c=e.currentId,i=e.currentMemo,l=e.setCurrentMemo,o=e.dqDatum,p=e.getDetailDataHandler;e=e.completeHandler;return u.a.createElement(m.F,{al:"flex-start",ju:"flex-start"},u.a.createElement(s,{right:!0},u.a.createElement(d,{text:"DIRECT REQUEST MANAGEMENT"}),u.a.createElement(E,{tabs:h,currentTab:t,setCurrentTab:a})),u.a.createElement(m.G,null,u.a.createElement(m.C,null,u.a.createElement(m.B,{width:"5%"},"번호"),u.a.createElement(m.B,{width:"10%"},"이름"),u.a.createElement(m.B,{width:"10%"},"연락처"),u.a.createElement(m.B,{width:"15%"},"이메일"),u.a.createElement(m.B,{width:"10%"},"창업희망지역"),u.a.createElement(m.B,{width:"10%"},"예상창업비용"),u.a.createElement(m.B,{width:"10%"},"처리상태"),u.a.createElement(m.B,{width:"15%"},"작성일"),u.a.createElement(m.B,{width:"15%"},"메모작성일")),u.a.createElement(m.G,{isBorder:!0,height:"250px",margin:"0px 0px 10px 0px",al:"flex-start",ju:"flex-start",isScroll:!0},o?0===o.length?u.a.createElement(m.C,{isData:!0},u.a.createElement(m.B,{isData:!0,width:"100%"},"조회 된 데이터가 없습니다.")):o.map((function(e,t){return u.a.createElement(s,{key:e._id,delay:30*t},u.a.createElement(m.C,{isActive:c===e._id,isData:!0,onClick:function(){return p(e.description,e.memo,e._id)}},u.a.createElement(m.B,{isData:!0,width:"5%"},t+1),u.a.createElement(m.B,{isData:!0,width:"5%"},e.name),u.a.createElement(m.B,{isData:!0,width:"20%"},e.mobile),u.a.createElement(m.B,{isData:!0,width:"20%"},e.email),u.a.createElement(m.B,{isData:!0,width:"10%"},e.isExistStore),u.a.createElement(m.B,{isData:!0,width:"10%"},e.maypay),u.a.createElement(m.B,{isData:!0,width:"10%"},u.a.createElement(m.x,{status:!e.isComplete},e.isComplete?"처리완료":"미처리")),u.a.createElement(m.B,{isData:!0,width:"15%"},e.createdAt),u.a.createElement(m.B,{isData:!0,width:"15%"},e.completedAt)))})):u.a.createElement(b,null)),u.a.createElement(m.G,{dr:"row"},u.a.createElement(m.G,{width:"50%",height:"370px",isBorder:!0,margin:"0px 10px 0px 0px",al:"flex-start",ju:"flex-start"},u.a.createElement(m.C,null,u.a.createElement(m.B,{width:"100%"},"문의내용")),u.a.createElement(m.G,{padding:"20px",height:"80%",ref:n,al:"flex-start",ju:"flex-start",isScroll:!0})),u.a.createElement(m.G,{width:"50%",height:"370px",isBorder:!0,al:"flex-start",ju:"flex-start"},u.a.createElement(m.C,null,u.a.createElement(m.B,{width:"100%"},"메모")),r?u.a.createElement(f,{value:i,componentHeight:"h-300",editorChangeHandler:function(e){return l(e)}}):u.a.createElement(m.G,{padding:"20px"}," 문의를 선택해주세요. "),r?u.a.createElement(m.G,{al:"flex-end",ju:"flex-end"},u.a.createElement(m.d,{kindOf:"update",onClick:e},"처리완료")):null))))}a.r(t);var r=a(676),c=a(678),i=a(677),l=a.n(i),o=a(1),u=a.n(o),m=(a(675),a(682),a(744)),s=(i=a(33),Object(i.a)((function(){return Promise.resolve().then(a.t.bind(null,679,7))}))),d=Object(i.a)((function(){return a.e(9).then(a.bind(null,762))})),E=Object(i.a)((function(){return a.e(8).then(a.bind(null,750))})),b=Object(i.a)((function(){return Promise.all([a.e(0),a.e(2)]).then(a.bind(null,746))})),f=Object(i.a)((function(){return Promise.all([a.e(1),a.e(7),a.e(0),a.e(6),a.e(54)]).then(a.bind(null,756))})),h=["미처리 문의사항","처리완료"],p=a(105),C=a(104);function O(){var e=Object(C.a)(["\n  mutation modifyStoreContactComplete($id: String!, $memo: String!) {\n    modifyStoreContactComplete(id: $id, memo: $memo)\n  }\n"]);return O=function(){return e},e}function j(){var e=Object(C.a)(["\n  query getStoreContact($isComplete: Boolean!) {\n    getStoreContact(isComplete: $isComplete) {\n      _id\n      name\n      loc\n      mobile\n      mayPay\n      email\n      isExistStore\n      description\n      createdAt\n      completedAt\n      isComplete\n      isAgreement\n    }\n  }\n"]);return j=function(){return e},e}var w=Object(p.gql)(j()),x=Object(p.gql)(O()),g=a(179),B=a(685);a(686),t.default=function(e){var t=e.history,a=Object(o.useState)(0),i=(D=Object(c.a)(a,2))[0],m=D[1],s=Object(o.useState)(!1),d=(h=Object(c.a)(s,2))[0],E=Object(o.useState)(""),b=(C=Object(c.a)(E,2))[0],f=(e=C[1],a=Object(o.useState)(""),s=(D=Object(c.a)(a,2))[0],D[1]),h=Object(o.useState)(""),C=(E=Object(c.a)(h,2))[0],O=E[1],j=(a=Object(o.useState)(!1),h=(D=Object(c.a)(a,2))[0],D[1]),D=(E=Object(o.useState)(null),(a=Object(c.a)(E,2))[0]),S=Object(o.useRef)(),T=(a=(E=Object(p.useQuery)(w,{variables:{isComplete:0!==i}})).data,E.refetch),v=(E=Object(p.useMutation)(x,{variables:{id:s,memo:C}}),Object(c.a)(E,1)[0]),A=function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({variables:{id:b.id}});case 2:e.sent.data.modifyStoreContactComplete?(g.b.info("UPDATE STORECONTACT!"),T(),dialogOpenToggleHandler()):g.b.error("잠시 후 다시 시도 해주세요");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){"LJHUQKLJHALXKJDH"===sessionStorage.getItem("CXKLJHQOUASDLJKX")&&t.goBack()}),[]),Object(o.useEffect)((function(){j(!1),S.current.innerHTML="",T()}),[i]),u.a.createElement(n,{currentTab:i,setCurrentTab:m,isLoading:d,currentData:b,setCurrentData:e,canEditor:h,currentId:s,currentMemo:C,setCurrentMemo:O,currentFiles:D,descRef:S,dqDatum:a&&a.getStoreContact,getDetailDataHandler:function(e,t,a){O(t),f(a),j(!0),S.current.innerHTML=e},completeHandler:function(){Object(B.confirmAlert)({title:"COMPLETE STORECONTACT",message:"문의 처리를 완료하시겠습니까?",buttons:[{label:"취소",onClick:function(){return!1}},{label:"확인",onClick:function(){return A()}}]})}})}}}]);