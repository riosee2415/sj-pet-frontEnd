(window.webpackJsonp=window.webpackJsonp||[]).push([[40,6,8],{745:function(e,t,n){"use strict";var a=n(676),r=n(677),c=n.n(r),i=n(688);r=n.n(i),i=n(236);n.n(i).a.config(),r.a.initializeApp({apiKey:"AIzaSyCgF4gjyoYzeRKi9avMHtnTjG-1rwHu5Ho",authDomain:"storage-4leaf.firebaseapp.com",databaseURL:"https://storage-4leaf.firebaseio.com",storageBucket:"storage-4leaf.appspot.com"});var l=r.a.storage().ref();t.a={getSotragePath:function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.child(t);case 2:return n=e.sent,e.next=5,n.getDownloadURL();case 5:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadFile:function(){var e=Object(a.a)(c.a.mark((function e(t,n,a){var r,i,u,o,s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(d=new Date).getFullYear()+"",i=1+d.getMonth()+"",u=d.getDate()+"",o=d.getHours()+"",s=d.getMinutes()+"",d=d.getSeconds()+"",d=r+i+u+o+s+d+n,e.prev=9,e.next=12,l.child("".concat(t,"/").concat(d)).put(a);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log(e.t0);case 17:return e.abrupt("return","".concat(t,"/").concat(d));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n,a){return e.apply(this,arguments)}}(),deleteFile:function(){var e=Object(a.a)(c.a.mark((function e(t,n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(n),r=0,e.prev=2,e.next=5,l.child(a).delete();case 5:r=1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),fileDownload:function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.child("/DREAM/uploads/storyBoard/202011223597thumb_520390_1598216467_83.jpg").getDownloadURL().then((function(e){var t=new XMLHttpRequest;t.responseType="blob",t.onload=function(e){},t.open("GET",e),t.send()})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},750:function(e,t,n){"use strict";n.r(t);var a=n(675),r=(a=n(1),n.n(a)),c=n(744);t.default=function(e){var t=e.tabs,n=e.currentTab,a=e.setCurrentTab;return r.a.createElement(c.G,{isTab:!0,margin:"0px 0px 40px 0px",dr:"row",al:"center",ju:"flex-start"},t&&t.map((function(e,t){return r.a.createElement(c.A,{isActive:n===t,key:t,onClick:function(){return a(t)}},e)})))}},811:function(e,t,n){"use strict";function a(e){var t=e.currentTab,n=e.setCurrentTab,a=e.isLoading,r=e.fileRef,c=e.currentId,i=e.currentData,l=e.currentTitle,u=e.currentThumbnailPath,j=e.openDialog,y=e.currentContent,S=e.datum,k=e.storyViewClickHandler,T=e.fileChangeHandler,C=e.dialogToggle,D=e.contentSaveHandler,V=e.basicInfoSaveHandler;e=e.deleteHandler;return Object(b.a)("ADMIN | 스토리리스트"),o.a.createElement(s.F,{al:"flex-start",ju:"flex-start"},o.a.createElement(f.a,{right:!0},o.a.createElement(d.default,{text:"스토리 리스트"}),o.a.createElement(p.default,{tabs:v,currentTab:t,setCurrentTab:n})),o.a.createElement(s.G,{dr:"row"},o.a.createElement(s.G,{width:"1000px",margin:"0px 10px 0px 0px"},o.a.createElement(f.a,{left:!0},o.a.createElement(s.C,null,o.a.createElement(s.B,{width:"10%"},"번호"),o.a.createElement(s.B,{width:"49%"},"스토리명"),o.a.createElement(s.B,{width:"41%"},"스토리 셍성일")),o.a.createElement(s.G,{height:"600px",isBorder:!0,isScroll:!0,al:"flex-start",ju:"flex-start"},S?0===S.length?o.a.createElement(s.C,{isData:!0},o.a.createElement(s.B,{isData:!0,width:"100%"},"조회 된 데이터가 없습니다.")):S.map((function(e,t){return o.a.createElement(f.a,{left:!0,delay:30*t,key:e._id},o.a.createElement(s.C,{isActive:c===e._id,isData:!0,onClick:function(){return k(e)}},o.a.createElement(s.B,{isData:!0,width:"10%"},t+1),o.a.createElement(s.B,{isData:!0,width:"49%"},20<e.title.length?e.title.substring(0,18)+"...":e.title),o.a.createElement(s.B,{isData:!0,width:"41%"},e.createdAt)))})):o.a.createElement(m.default,null)))),o.a.createElement(f.a,{right:!0},o.a.createElement(s.G,null,o.a.createElement(s.C,null,o.a.createElement(s.B,{width:"100%"},"스토리 정보")),o.a.createElement(s.G,{height:"600px",isBorder:!0,isScroll:!0,padding:"10px",al:"flex-start",ju:"flex-start"},i?o.a.createElement(s.G,{padding:"15px"},o.a.createElement(s.G,{dr:"row",margin:"0px 0px 20px 0px"},o.a.createElement(s.e,null,"제목"),o.a.createElement(s.D,Object.assign({type:"text"},l))),o.a.createElement(s.p,{margin:"0px 0px 20px 0px",src:u&&u.value,width:"300px",height:"300px",isBorder:!0}),o.a.createElement(s.j,{id:"file-js",type:"file",accept:"image/jpeg,image/gif,image/png",onChange:T,ref:r}),a?o.a.createElement(m.default,null):o.a.createElement(s.k,{width:"300px",htmlFor:"file-js",margin:"0px 0px 55px 0px"},"THUMBNAIL UPLOAD"),o.a.createElement(s.G,{dr:"row",margin:"0px 0px 20px 0px"},o.a.createElement(s.e,null,"등록일"),o.a.createElement(s.D,{type:"text",readOnly:!0,value:i&&i.createdAt})),o.a.createElement(s.G,{dr:"row",al:"flex-end",ju:"flex-end"},o.a.createElement(s.d,{margin:"0px 10px 0px 0px",kindOf:"delete",onClick:e},"스토리 삭제"),o.a.createElement("a",{href:"/#/brand-detail/".concat(i&&i._id),target:"_blank"},o.a.createElement(s.d,{margin:"0px 10px 0px 0px"},"게시글 보러가기")),o.a.createElement(s.d,{margin:"0px 10px 0px 0px",kindOf:"update",onClick:function(){return C()}},"내용보기"),o.a.createElement(s.d,{kindOf:"create",onClick:V},"정보저장"))):o.a.createElement(s.G,{padding:"20px"},"좌측 스토리를 선택해주세요."))))),o.a.createElement(x.a,{open:j,TransitionComponent:O,keepMounted:!0,onClose:function(){return C()},"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",fullWidth:!0,maxWidth:"lg"},o.a.createElement(w.a,{id:"alert-dialog-slide-title"},"스토리 내용 상세보기"),o.a.createElement(h.a,null,o.a.createElement(s.e,{margin:"0px 0px 50px 0px"},"스토리 내용"),o.a.createElement(s.E,Object.assign({height:"500px"},y))),o.a.createElement(E.a,null,o.a.createElement(g.a,{onClick:function(){return D()},color:"primary"},"저장 후 닫기"),o.a.createElement(g.a,{onClick:function(){return C()},color:"secondary"},"닫기"))))}n.r(t);var r=n(676),c=n(678),i=n(677),l=n.n(i),u=(n(682),n(1)),o=n.n(u),s=(n(681),n(675),n(744)),d=n(762),p=n(750),f=(i=n(679),n.n(i)),m=n(746),b=n(680),g=n(739),x=n(736),E=n(738),h=n(737),w=n(743),j=n(673),v=["스토리 리스트"],O=o.a.forwardRef((function(e,t){return o.a.createElement(j.a,Object.assign({direction:"up",ref:t},e))})),y=n(105),S=n(104);function k(){var e=Object(S.a)(["\n  mutation deleteStoryView($id: String!) {\n    deleteStoryView(id: $id)\n  }\n"]);return k=function(){return e},e}function T(){var e=Object(S.a)(["\n  mutation modifyStoryViewBasic(\n    $id: String!\n    $title: String!\n    $thumbnail: String!\n  ) {\n    modifyStoryViewBasic(id: $id, title: $title, thumbnail: $thumbnail)\n  }\n"]);return T=function(){return e},e}function C(){var e=Object(S.a)(["\n  mutation modifyStoryView($id: String!, $content: String!) {\n    modifyStoryView(id: $id, content: $content)\n  }\n"]);return C=function(){return e},e}function D(){var e=Object(S.a)(["\n  query getStoryViewList {\n    getStoryViewList {\n      _id\n      title\n      thumbnail\n      content\n      isDelete\n    }\n  }\n"]);return D=function(){return e},e}var V=Object(y.gql)(D()),B=Object(y.gql)(C()),H=Object(y.gql)(T()),A=Object(y.gql)(k()),G=n(179),L=n(745),$=n(749),M=n(685);n(686),t.default=function(){function e(){j(!w)}var t=Object(u.useState)(0),n=(x=Object(c.a)(t,2))[0],i=x[1],s=Object(u.useState)(!1),d=(E=Object(c.a)(s,2))[0],p=E[1],f=Object(u.useRef)(),m=Object(u.useState)(""),b=(t=Object(c.a)(m,2))[0],g=t[1],x=Object(u.useState)(null),E=(s=Object(c.a)(x,2))[0],h=s[1],w=(m=Object(u.useState)(!1),(t=Object(c.a)(m,2))[0]),j=t[1],v=Object($.a)(),O=Object($.a)(),S=Object($.a)(),k=(s=(x=Object(y.useQuery)(V)).data,x.refetch),T=(m=Object(y.useMutation)(B),Object(c.a)(m,1)[0]),C=(t=Object(y.useMutation)(H),Object(c.a)(t,1)[0]),D=(x=Object(y.useMutation)(A),Object(c.a)(x,1)[0]),R=(m=function(){var e=Object(r.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,L.a.uploadFile("SJPET/uploads/storyView",t.target.files[0].name,t.target.files[0]);case 3:return n=e.sent,e.next=6,L.a.getSotragePath(n);case 6:O.setValue(e.sent),p(!1),f.current.value=null;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var t=Object(r.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T({variables:{id:b,content:v.value}});case 2:t.sent.data.modifyStoryView?(G.b.info("UPDATE CONTENT!"),k(),e()):G.b.error("잠시 후 다시 시도해주세요.");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({variables:{id:b,thumbnail:O.value,title:S.value}});case 2:e.sent.data.modifyStoryViewBasic?(G.b.info("UPDATE CONTENT!"),k()):G.b.error("잠시 후 다시 시도해주세요.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D({variables:{id:b}});case 2:e.sent.data.deleteStoryView?(G.b.info("DELETE CONTENT!"),k(),h(null)):G.b.error("잠시 후 다시 시도해주세요.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(u.useEffect)((function(){k()}),[]),o.a.createElement(a,{currentTab:n,setCurrentTab:i,isLoading:d,fileRef:f,currentId:b,currentData:E,currentThumbnailPath:O,currentTitle:S,openDialog:w,currentContent:v,datum:s&&s.getStoryViewList,storyViewClickHandler:function(e){g(e._id),h(e),S.setValue(e.title),O.setValue(e.thumbnail),v.setValue(e.content)},fileChangeHandler:m,dialogToggle:e,contentSaveHandler:t,basicInfoSaveHandler:x,deleteHandler:function(){Object(M.confirmAlert)({title:"DELETE EVENT",message:"선택하신 이벤트를 삭제 하시겠습니까 ?",buttons:[{label:"취소",onClick:function(){return!1}},{label:"확인",onClick:function(){return R()}}]})}})}}}]);