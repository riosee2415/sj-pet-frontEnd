(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{795:function(e,t,n){"use strict";n.r(t);var a=n(676),r=n(678),u=n(677),i=n.n(u),c=(n(682),n(1)),p=n.n(c),o=n(104),s=n(744),l=n(33),f=n(746),d=(u=n(53),n(680));function m(){var e=Object(o.a)(["\n  width: 330px;\n  margin: 10px 0px;\n\n  text-align: center;\n  color: ",";\n"]);return m=function(){return e},e}function g(){var e=Object(o.a)(["\n  width: 330px;\n  height: 450px;\n  background-position: center center;\n  background-size: cover;\n  background-image: url(",");\n"]);return g=function(){return e},e}function b(e){var t=e.currentTab,n=e.setCurrentTab,a=e.isLoading,r=e.fileRef,u=e.popupDatum,i=e.fileChangeHandler;e=e.modifyPopupStatus;return Object(d.a)("ADMIN | 팝업"),p.a.createElement(s.F,{al:"flex-start",ju:"flex-start"},p.a.createElement(O,{right:!0},p.a.createElement(P,{text:"팝업 관리"}),p.a.createElement(x,{tabs:h,currentTab:t,setCurrentTab:n})),p.a.createElement(s.G,null,p.a.createElement(s.n,{padding:"10px"},p.a.createElement(s.o,{margin:"0px 0px 5px 0px"},"팝업의 이미지 크기는 가로 330px 새로 450px 입니다."),p.a.createElement(s.o,{margin:"0px 0px 5px 0px"},"사이즈(비율)이 상이할 경우 이미지가 비정상으로 보일 수 있습니다."),p.a.createElement(s.o,null,"동일한 파일을 연속해서 업로드 하는 경우 중복방지를 위해 작동이 중단될 수 있습니다.")),p.a.createElement(s.G,{margin:"40px 40px"},p.a.createElement(s.p,{width:"330px",height:"450px",isBorder:!0,margin:"0px 0px 10px 0px",src:u&&u[t].imagePath}),p.a.createElement(s.j,{id:"file-js",type:"file",accept:"image/jpeg,image/gif,image/png",onChange:i,ref:r}),a?p.a.createElement(f.default,null):p.a.createElement(s.k,{width:"330px",htmlFor:"file-js",margin:"10px 0px 10px 0px"},"POPUP IMAGE UPLOAD"),p.a.createElement(j,{status:u&&u[t].useYn},u&&u[t].useYn?"해당 팝업은 사용 상태 입니다.":"해당 팝업은 미사용 상태 입니다."),p.a.createElement(s.d,{kindOf:u&&u[t].useYn?"delete":"update",width:"330px",onClick:e},u&&u[t].useYn?"사용 중단하기":"사용 활성화 하기"))))}var P=Object(l.a)((function(){return n.e(9).then(n.bind(null,762))})),x=Object(l.a)((function(){return n.e(8).then(n.bind(null,750))})),O=Object(l.a)((function(){return Promise.resolve().then(n.t.bind(null,679,7))})),h=["POPUP - 1","POPUP - 2","POPUP - 3"],j=(Object(u.d)(s.G)(g(),(function(e){return e.src})),u.d.div(m(),(function(e){return e.status?e.theme.create_B_C:e.theme.delete_B_C}))),v=n(105),E=n(179);function w(){var e=Object(o.a)(["\n  mutation modifyPopupStatus($id: String!, $status: Boolean!) {\n    modifyPopupStatus(id: $id, status: $status)\n  }\n"]);return w=function(){return e},e}function y(){var e=Object(o.a)(["\n  mutation modifyPopup($id: String!, $imagePath: String!) {\n    modifyPopup(id: $id, imagePath: $imagePath)\n  }\n"]);return y=function(){return e},e}function S(){var e=Object(o.a)(["\n  query getPopup {\n    getPopup {\n      _id\n      imagePath\n      useYn\n    }\n  }\n"]);return S=function(){return e},e}var k=Object(v.gql)(S()),C=Object(v.gql)(y()),T=Object(v.gql)(w()),U=n(745);t.default=function(){var e=Object(c.useState)(0),t=(f=Object(r.a)(e,2))[0],n=f[1],u=(e=Object(c.useState)(!1),e=(f=Object(r.a)(e,2))[0],f[1]),o=Object(c.useRef)(),s=(f=Object(v.useQuery)(k)).data,l=f.refetch,f=Object(v.useMutation)(C),d=Object(r.a)(f,1)[0],m=(f=Object(v.useMutation)(T),Object(r.a)(f,1)[0]);f=function(){var e=Object(a.a)(i.a.mark((function e(n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,U.a.uploadFile("SJPET/uploads/popups",n.target.files[0].name,n.target.files[0]);case 3:return a=e.sent,e.next=6,U.a.getSotragePath(a);case 6:return r=e.sent,e.next=9,d({variables:{id:s&&s.getPopup[t]._id,imagePath:r}});case 9:(r=e.sent.data)&&r.modifyPopup?(E.b.info("POPUP UPDATE!"),l(),o.current.value=null):E.b.error("잠시 후 다시 시도해주세요"),u(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.a.createElement(b,{currentTab:t,setCurrentTab:n,isLoading:e,fileRef:o,popupDatum:s&&s.getPopup,fileChangeHandler:f,modifyPopupStatus:function(){var e=Object(a.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({variables:{id:s&&s.getPopup[t]._id,status:s&&s.getPopup[t].useYn}});case 2:(n=e.sent.data)&&n.modifyPopupStatus?(E.b.info("POPUP UPDATE!"),l()):E.b.error("잠시 후 다시 시도해주세요");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}}}]);